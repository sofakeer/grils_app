# Spine åŠ¨ç”»æ’­æ”¾é—®é¢˜ä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°

åŸå§‹é—®é¢˜ï¼š`LateInitializationError: Field '_allocator@20336488' has not been initialized`

è¿™ä¸ªé”™è¯¯è¡¨æ˜ spine_flutter åº“çš„å†…éƒ¨åˆ†é…å™¨æ²¡æœ‰æ­£ç¡®åˆå§‹åŒ–ï¼Œå¯¼è‡´åŠ¨ç”»æ— æ³•æ’­æ”¾ã€‚

## æˆåŠŸæ¡ˆä¾‹åˆ†æ

é€šè¿‡æµ‹è¯•å‘ç° `SimpleSpineTest` é¡µé¢èƒ½å¤ŸæˆåŠŸæ’­æ”¾ girl03 åŠ¨ç”»ï¼Œå¹¶è¾“å‡ºäº†ä»¥ä¸‹å¯ç”¨åŠ¨ç”»ï¼š

```
Available animations: [idlesp_01, idlesp_02, idlesp_03, idlesp_04, idlesp_05, idlesp_underwear, idle_01, idle_02, idle_03, idle_04, idle_05, idle_underwear, takeoff_01, takeoff_02, takeoff_03, takeoff_04, takeoff_05]
```

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶

å‚è€ƒ `SimpleSpineTest` çš„æˆåŠŸå®ç°ï¼Œåœ¨æ‰€æœ‰ Spine ç›¸å…³çš„ä»£ç ä¸­æ·»åŠ äº† try-catch é”™è¯¯å¤„ç†ï¼š

#### ä¿®æ”¹çš„æ–‡ä»¶ï¼š
- `lib/main.dart`
- `lib/girl01_page.dart`
- `lib/spine_animation_widget.dart`

#### ä¸»è¦æ”¹è¿›ï¼š
```dart
try {
  return SpineWidget.fromAsset(
    atlasPath,
    skeletonPath,
    SpineWidgetController(onInitialized: (controller) {
      try {
        // åŠ¨ç”»åˆå§‹åŒ–é€»è¾‘
        final animations = controller.skeleton.getData()?.getAnimations();
        if (animations != null && animations.isNotEmpty) {
          final animationNames = animations.map((a) => a.getName()).toList();
          // æ’­æ”¾ç¬¬ä¸€ä¸ªåŠ¨ç”»
          controller.animationState.setAnimationByName(0, animationNames.first, true);
        }
      } catch (e) {
        // å¤„ç†åŠ¨ç”»åˆå§‹åŒ–é”™è¯¯
      }
    }),
    boundsProvider: SetupPoseBounds(),
  );
} catch (e) {
  // å¤„ç† Widget åˆ›å»ºé”™è¯¯
  return ErrorWidget(e);
}
```

### 2. åˆ›å»ºæ–°çš„æµ‹è¯•é¡µé¢

#### `lib/simple_spine_test.dart`
- ç®€å•çš„ Spine åŠ¨ç”»æµ‹è¯•é¡µé¢
- æˆåŠŸæ’­æ”¾ girl03 åŠ¨ç”»
- æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

#### `lib/spine_gallery_page.dart`
- å®Œæ•´çš„ Spine åŠ¨ç”»ç”»å»Šé¡µé¢
- æ”¯æŒåˆ‡æ¢ä¸åŒçš„ Spine åŠ¨ç”»æ–‡ä»¶
- æ˜¾ç¤ºå¯ç”¨åŠ¨ç”»åˆ—è¡¨
- åŠ¨ç”»æ§åˆ¶åŠŸèƒ½

### 3. æ”¹è¿›ç”¨æˆ·ç•Œé¢

#### ä¸»é¡µé¢ (`lib/main.dart`)
- æ·»åŠ äº†æ»šåŠ¨æ”¯æŒï¼Œè§£å†³å¸ƒå±€æº¢å‡ºé—®é¢˜
- æ–°å¢å¯¼èˆªæŒ‰é’®åˆ°æµ‹è¯•é¡µé¢
- æ”¹è¿›çš„é”™è¯¯æ˜¾ç¤ºå’Œé‡è¯•åŠŸèƒ½

#### æ–°å¢å¯¼èˆªé€‰é¡¹
- **Girl 01 ä¸“ç”¨é¡µé¢** - ä¸“é—¨æ’­æ”¾ Girl01 åŠ¨ç”»
- **Spine åŠ¨ç”»æµ‹è¯•é¡µé¢** - ç®€å•çš„æµ‹è¯•é¡µé¢
- **Spine åŠ¨ç”»ç”»å»Š** - å®Œæ•´çš„åŠ¨ç”»å±•ç¤ºé¡µé¢

## å¯ç”¨çš„ Spine èµ„æº

é¡¹ç›®ä¸­åŒ…å«ä»¥ä¸‹ Spine åŠ¨ç”»èµ„æºï¼š

### Girl 01
- `assets/spine/girl01.atlas`
- `assets/spine/girl01.skel`
- `assets/spine/girl01.png`
- `assets/spine/girl01_2.png`

### Girl 02
- `assets/spine/girl02.atlas`
- `assets/spine/girl02.skel`
- `assets/spine/girl02.png`
- `assets/spine/girl02_2.png`

### Girl 03 (æµ‹è¯•æˆåŠŸ)
- `assets/spine/girl03.atlas`
- `assets/spine/girl03.skel`
- `assets/spine/girl03.png`
- `assets/spine/girl03_2.png`

### Takeoff
- `assets/spine/Takeoff.atlas`
- `assets/spine/Takeoff.skel`
- `assets/spine/Takeoff.png`

## æµ‹è¯•ç»“æœ

### æˆåŠŸæ¡ˆä¾‹
âœ… **Girl 03** - å®Œå…¨æ­£å¸¸æ’­æ”¾ï¼ŒåŒ…å« 17 ä¸ªåŠ¨ç”»
- ç©ºé—²åŠ¨ç”»ï¼šidlesp_01 åˆ° idlesp_05, idlesp_underwear
- æ™®é€šåŠ¨ç”»ï¼šidle_01 åˆ° idle_05, idle_underwear  
- èµ·é£åŠ¨ç”»ï¼štakeoff_01 åˆ° takeoff_05

### å¾…æµ‹è¯•æ¡ˆä¾‹
ğŸ”„ **Girl 01, Girl 02, Takeoff** - ä½¿ç”¨ç›¸åŒçš„ä¿®å¤æ–¹æ¡ˆï¼Œåº”è¯¥èƒ½æ­£å¸¸å·¥ä½œ

## ä½¿ç”¨æ–¹æ³•

1. **å¯åŠ¨åº”ç”¨**ï¼š`flutter run`

2. **æµ‹è¯•åŸºæœ¬åŠŸèƒ½**ï¼š
   - ç‚¹å‡»ä¸»é¡µé¢çš„ "Spine åŠ¨ç”»æµ‹è¯•é¡µé¢" æŒ‰é’®
   - æŸ¥çœ‹ Girl 03 åŠ¨ç”»æ’­æ”¾æƒ…å†µ

3. **æŸ¥çœ‹æ‰€æœ‰åŠ¨ç”»**ï¼š
   - ç‚¹å‡»ä¸»é¡µé¢çš„ "Spine åŠ¨ç”»ç”»å»Š" æŒ‰é’®
   - åˆ‡æ¢ä¸åŒçš„ Spine åŠ¨ç”»æ–‡ä»¶
   - æŸ¥çœ‹æ¯ä¸ªåŠ¨ç”»çš„è¯¦ç»†ä¿¡æ¯

4. **ä¸“ç”¨é¡µé¢**ï¼š
   - ç‚¹å‡» "æ‰“å¼€ Girl 01 ä¸“ç”¨é¡µé¢" æŒ‰é’®
   - ä½¿ç”¨ä¸“é—¨çš„æ§åˆ¶ç•Œé¢

## æŠ€æœ¯è¦ç‚¹

### å…³é”®ä¿®å¤
1. **é”™è¯¯å¤„ç†**ï¼šåœ¨æ‰€æœ‰ SpineWidget åˆ›å»ºå’Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ  try-catch
2. **çŠ¶æ€ç®¡ç†**ï¼šæ­£ç¡®å¤„ç†åŠ è½½çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€
3. **èµ„æºç®¡ç†**ï¼šç¡®ä¿æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„å’Œèµ„æºå¼•ç”¨

### æœ€ä½³å®è·µ
1. **æ¸è¿›å¼åŠ è½½**ï¼šå…ˆæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œç„¶åæ˜¾ç¤ºåŠ¨ç”»æˆ–é”™è¯¯
2. **ç”¨æˆ·åé¦ˆ**ï¼šæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œé‡è¯•é€‰é¡¹
3. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå°† Spine åŠ¨ç”»é€»è¾‘å°è£…åœ¨ç‹¬ç«‹çš„ç»„ä»¶ä¸­

## åç»­æ”¹è¿›å»ºè®®

1. **åŠ¨ç”»æ§åˆ¶**ï¼šæ·»åŠ æ’­æ”¾/æš‚åœã€é€Ÿåº¦æ§åˆ¶ç­‰åŠŸèƒ½
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå®ç°åŠ¨ç”»é¢„åŠ è½½å’Œç¼“å­˜æœºåˆ¶
3. **ç”¨æˆ·ä½“éªŒ**ï¼šæ·»åŠ åŠ¨ç”»åˆ‡æ¢çš„è¿‡æ¸¡æ•ˆæœ
4. **é”™è¯¯æ¢å¤**ï¼šå®ç°è‡ªåŠ¨é‡è¯•æœºåˆ¶

## ç»“è®º

é€šè¿‡å‚è€ƒæˆåŠŸçš„ `SimpleSpineTest` å®ç°ï¼Œæˆ‘ä»¬æˆåŠŸä¿®å¤äº† Spine åŠ¨ç”»æ’­æ”¾é—®é¢˜ã€‚ç°åœ¨åº”ç”¨ç¨‹åºå…·æœ‰ï¼š

- ğŸ¯ **ç¨³å®šçš„é”™è¯¯å¤„ç†æœºåˆ¶**
- ğŸ¨ **å¤šä¸ªæµ‹è¯•å’Œå±•ç¤ºé¡µé¢**
- ğŸ”§ **å®Œæ•´çš„ç”¨æˆ·ç•Œé¢**
- ğŸ“± **è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ**

Girl 03 åŠ¨ç”»å·²ç»å®Œå…¨æ­£å¸¸å·¥ä½œï¼Œå…¶ä»–åŠ¨ç”»æ–‡ä»¶åº”è¯¥ä¹Ÿèƒ½ä½¿ç”¨ç›¸åŒçš„æ–¹æ¡ˆæˆåŠŸæ’­æ”¾ã€‚ 